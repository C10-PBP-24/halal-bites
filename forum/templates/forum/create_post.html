<div class="center-container">
    <div class="center-content">
        <script>
            // Handle form submission via AJAX
            const postForm = document.getElementById('postForm');
            postForm.addEventListener('submit', function(e) {
                e.preventDefault();  // Prevent default form submission

                const formData = new FormData(postForm);
                const url = postForm.action;  // The form action URL

                fetch(url, {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                    },
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        alert('Post created successfully!');
                        // Optionally, reload or update the page content
                        location.reload();  // You can replace this with a more user-friendly update
                    } else {
                        alert('Failed to create post');
                    }
                })
                .catch(error => console.error('Error:', error));
            });
        </script>

        <form id="postForm" method="post" action="{% url 'forum:create_post_ajax' pk=thread.pk %}">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">Submit</button>
        </form>
    </div>
</div>
