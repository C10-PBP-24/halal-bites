{% extends 'base.html' %}

{% block content %}
<div class="container">
  <h1 class="thread-title">{{ object.title }}</h1>
  <p class="thread-meta">Created on {{ object.created_at|date:"F j, Y, g:i a" }} by {{ object.user.username }}</p>

  <hr>

  <h2>Posts</h2>

  {% if object.post_set.exists %}
    <ul class="post-list">
      {% for post in object.post_set.all %}
        <li class="post-item">
          <div class="post-content">{{ post.content }}</div>
          <p class="post-meta">Posted on {{ post.created_at|date:"F j, Y, g:i a" }} by {{ post.user.username }}</p>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No posts yet. Be the first to reply!</p>
  {% endif %}

  <hr>

  <h3>Add New Post</h3>
  <form method="post" action="{% url 'forum:create_post' pk=object.pk %}">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>
{% endblock %}
